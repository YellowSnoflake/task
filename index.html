<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pace Tracker</title>
<style>
  body {
    margin:0; padding:20px;
    font-family:Segoe UI, sans-serif;
    background:#0b0d1a; color:#cbd4ff;
    display:flex; justify-content:center; align-items:flex-start;
  }
  .card {
    background:linear-gradient(180deg,#14162ad9,#0c0d1bd9);
    border:1px solid #232649; border-radius:16px;
    padding:clamp(12px,2.4vw,20px);
    overflow:visible; box-shadow:0 10px 30px #0003,inset 0 1px 0 #ffffff10;
    max-width:800px; width:100%;
  }
  h3 {margin:0 0 12px; font-size:1.3rem}
  .grid {
    display:grid; gap:14px;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  }
  .field {display:flex; flex-direction:column; gap:4px}
  .label {font-size:.85rem; color:#96a2da; display:flex; align-items:center; gap:4px}
  .value {font-size:1.2rem; font-weight:600}
  .info {position:relative; cursor:pointer}
  .info:hover .tip{opacity:1; transform:translateY(-6px); pointer-events:auto}
  .tip {
    position:absolute; bottom:140%; left:50%; transform:translate(-50%,0);
    background:#0d1124; border:1px solid #202548; color:#cbd4ff;
    font-size:.78rem; padding:8px 10px; border-radius:8px;
    max-width:min(70vw,320px); white-space:normal; opacity:0;
    transition:all .15s ease; z-index:9999; pointer-events:none;
  }
  .tip.bottom {bottom:auto; top:140%}
  .tip.align-right{left:auto; right:0; transform:translateY(-6px)}
  .tip.align-left{left:0; transform:translateY(-6px)}
  .controls {margin-top:16px; display:flex; flex-wrap:wrap; gap:12px}
  input[type="time"]{background:#0d1124; border:1px solid #202548; color:#cbd4ff; padding:4px 8px; border-radius:6px}
  button {
    background:#202548; border:1px solid #2e3358;
    color:#cbd4ff; padding:6px 12px; border-radius:6px; cursor:pointer;
  }
  button:hover{background:#2e3358}
</style>
</head>
<body>
  <div class="card">
    <h3>Snapshot</h3>
    <div class="grid">
      <div class="field"><div class="label">Tasks to go</div><div class="value" id="tasks">32</div></div>
      <div class="field info">
        <div class="label">Target time for completed ⓘ
          <div class="tip">The exact time all tasks should be done if on target pace.</div>
        </div>
        <div class="value" id="target">00:00</div>
      </div>
      <div class="field"><div class="label">Ahead / Behind</div><div class="value" id="pace">On time</div></div>
      <div class="field info">
        <div class="label">Should have used by now ⓘ
          <div class="tip">Amount of working time expected to be spent so far.</div>
        </div>
        <div class="value" id="used">00:00</div>
      </div>
      <div class="field"><div class="label">Over/Under used (Δ)</div><div class="value" id="delta">±00:00</div></div>
      <div class="field info">
        <div class="label">ETA (plan pace) ⓘ
          <div class="tip">Estimated finish time if tasks follow planned pace.</div>
        </div>
        <div class="value" id="etaPlan">00:00</div>
      </div>
      <div class="field info">
        <div class="label">ETA (current pace) ⓘ
          <div class="tip">Estimated finish time based on current speed.</div>
        </div>
        <div class="value" id="etaCurrent">00:00</div>
      </div>
    </div>
    <div class="controls">
      <label>Start: <input type="time" id="startTime" value="08:00"></label>
      <label>End: <input type="time" id="endTime" value="17:00"></label>
      <button id="lunchBtn">Lunch ✓</button>
    </div>
  </div>

<script>
(function(){
  const startInput=document.getElementById('startTime');
  const endInput=document.getElementById('endTime');
  const lunchBtn=document.getElementById('lunchBtn');
  let lunchDone=false;

  lunchBtn.addEventListener('click',()=>{
    lunchDone=!lunchDone;
    lunchBtn.textContent = lunchDone ? "Lunch ✔️" : "Lunch ✓";
  });

  function update(){
    const now=new Date();
    const start=parseTime(startInput.value);
    const end=parseTime(endInput.value);
    const totalMs=end-start - (lunchDone?3600000:0); // subtract 1h if lunch taken
    const elapsed=now-start;
    const percentUsed=Math.max(0,Math.min(1,elapsed/totalMs));
    const usedMinutes=Math.floor(totalMs/60000*percentUsed);

    document.getElementById('tasks').textContent="32"; // static placeholder
    document.getElementById('used').textContent=formatHM(usedMinutes);
    document.getElementById('delta').textContent="±00:00";

    const etaPlan=new Date(start.getTime()+totalMs);
    const etaCurrent=new Date(now.getTime()+(1-percentUsed)*totalMs);
    document.getElementById('etaPlan').textContent=formatClock(etaPlan);
    document.getElementById('etaCurrent').textContent=formatClock(etaCurrent);

    requestAnimationFrame(update);
  }
  function parseTime(str){
    const [h,m]=str.split(':').map(Number);
    const d=new Date(); d.setHours(h,m,0,0); return d;
  }
  function formatHM(mins){
    const h=Math.floor(mins/60), m=mins%60;
    return (h<10?'0':'')+h+':'+(m<10?'0':'')+m;
  }
  function formatClock(d){
    const h=d.getHours().toString().padStart(2,'0');
    const m=d.getMinutes().toString().padStart(2,'0');
    const s=d.getSeconds().toString().padStart(2,'0');
    return `${h}:${m}:${s}`;
  }

  // Tooltip auto-position
  function positionTip(infoEl){
    const tip=infoEl.querySelector('.tip'); if(!tip) return;
    tip.classList.remove('bottom','align-right','align-left');
    tip.style.opacity=0; tip.style.visibility='hidden';
    const tipRect=tip.getBoundingClientRect();
    const vw=window.innerWidth;
    if(tipRect.right>vw-8) tip.classList.add('align-right');
    if(tipRect.left<8) tip.classList.add('align-left');
    if(tipRect.top<8) tip.classList.add('bottom');
    tip.style.opacity=''; tip.style.visibility='';
  }
  document.querySelectorAll('.info').forEach(info=>{
    info.addEventListener('mouseenter',()=>positionTip(info));
    info.addEventListener('mousemove',()=>positionTip(info));
  });
  window.addEventListener('resize',()=>{
    document.querySelectorAll('.info:hover').forEach(positionTip);
  });

  update();
})();
</script>
</body>
</html>
